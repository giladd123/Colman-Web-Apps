<!-- Gilad-Tidhar-325767929-Rotem-Batstein-325514917-Shani-Bashari-325953743 -->

<!DOCTYPE html>
<html lang="en">
<%- include('partials/head', { extraCss: ["/style/profiles_page.css", "/style/settings.css" ] }) %>

  <body>
    <main class="container">
      <header>
        <h1>Who's watching?</h1>
      </header>

      <section class="profiles"></section>

      <footer class="mt-4">
        <button class="btn btn-manage" id="openSettingsBtn" data-bs-toggle="modal" data-bs-target="#settingsModal">
          Profile Statistics
        </button>
      </footer>
    </main>
    <%- include('partials/stats_modal') %>

      <!-- Avatar Picker Modal -->
      <section class="modal fade" id="avatarPickerModal" tabindex="-1" aria-hidden="true">
        <section class="modal-dialog modal-dialog-centered">
          <section class="modal-content bg-dark text-white border-secondary">
            <header class="modal-header border-secondary">
              <h5 class="modal-title">Choose Profile Image</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </header>
            <section class="modal-body">
              <section class="mb-2 text-secondary small">Default pictures</section>
              <section id="avatarPickerGrid" class="default-avatars mb-3"></section>
              <section class="mb-2 text-secondary small">Or upload your own</section>
              <input id="avatarPickerUpload" type="file" accept="image/*"
                class="form-control bg-dark text-white mb-3" />
              <section class="image-preview image-preview--square border border-secondary rounded overflow-hidden">
                <section id="avatarPickerPreview"
                  class="w-100 h-100 d-flex align-items-center justify-content-center text-secondary small">No Image
                </section>
              </section>
            </section>
            <footer class="modal-footer border-secondary">
              <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" id="avatarPickerApply" class="btn btn-danger">Apply</button>
            </footer>
          </section>
        </section>
      </section>

      <!-- Delete Profile Confirmation Modal -->
      <section class="modal fade" id="deleteProfileConfirmModal" tabindex="-1" aria-hidden="true">
        <section class="modal-dialog modal-dialog-centered">
          <section class="modal-content bg-dark text-white border-secondary">
            <header class="modal-header border-secondary">
              <h5 class="modal-title">Delete Profile?</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </header>
            <section class="modal-body">
              <section class="d-flex align-items-center gap-3">
                <section class="image-preview image-preview--square border border-secondary rounded overflow-hidden"
                  style="width: 72px;">
                  <img id="deleteProfileThumb" alt="profile" class="w-100 h-100 object-fit-cover" />
                </section>
                <section>
                  <section>You're about to delete:</section>
                  <section class="fw-semibold" id="deleteProfileName"></section>
                  <section class="text-secondary small">This action cannot be undone.</section>
                </section>
              </section>
            </section>
            <footer class="modal-footer border-secondary">
              <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" id="deleteProfileConfirmBtn" class="btn btn-danger">Delete</button>
            </footer>
          </section>
        </section>
      </section>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
      <script src="/scripts/profiles_page.js"></script>
      <script>
        document.addEventListener("DOMContentLoaded", (event) => {
          loadProfiles();
        });
      </script>
  </body>

</html>