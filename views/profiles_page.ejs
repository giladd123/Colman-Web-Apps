<!-- Gilad-Tidhar-325767929-Rotem-Batstein-325514917-Shani-Bashari-325953743 -->

<!DOCTYPE html>
<html lang="en">
<%- include('partials/head', { extraCss: ["/style/profiles_page.css", "/style/settings.css" ] }) %>

  <body>
    <div class="container">
      <h1>Who's watching?</h1>

      <div class="profiles"></div>

      <button class="btn btn-manage" id="openSettingsBtn" data-bs-toggle="modal" data-bs-target="#settingsModal">
        Profile Statistics
      </button>
    </div>
    <%- include('partials/stats_modal') %>

      <!-- Avatar Picker Modal -->
      <div class="modal fade" id="avatarPickerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content bg-dark text-white border-secondary">
            <div class="modal-header border-secondary">
              <h5 class="modal-title">Choose Profile Image</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="mb-2 text-secondary small">Default pictures</div>
              <div id="avatarPickerGrid" class="default-avatars mb-3"></div>
              <div class="mb-2 text-secondary small">Or upload your own</div>
              <input id="avatarPickerUpload" type="file" accept="image/*"
                class="form-control bg-dark text-white mb-3" />
              <div class="image-preview image-preview--square border border-secondary rounded overflow-hidden">
                <div id="avatarPickerPreview"
                  class="w-100 h-100 d-flex align-items-center justify-content-center text-secondary small">No Image
                </div>
              </div>
            </div>
            <div class="modal-footer border-secondary">
              <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" id="avatarPickerApply" class="btn btn-danger">Apply</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Delete Profile Confirmation Modal -->
      <div class="modal fade" id="deleteProfileConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content bg-dark text-white border-secondary">
            <div class="modal-header border-secondary">
              <h5 class="modal-title">Delete Profile?</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="d-flex align-items-center gap-3">
                <div class="image-preview image-preview--square border border-secondary rounded overflow-hidden"
                  style="width: 72px;">
                  <img id="deleteProfileThumb" alt="profile" class="w-100 h-100 object-fit-cover" />
                </div>
                <div>
                  <div>You're about to delete:</div>
                  <div class="fw-semibold" id="deleteProfileName"></div>
                  <div class="text-secondary small">This action cannot be undone.</div>
                </div>
              </div>
            </div>
            <div class="modal-footer border-secondary">
              <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" id="deleteProfileConfirmBtn" class="btn btn-danger">Delete</button>
            </div>
          </div>
        </div>
      </div>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
      <script src="/scripts/profiles_page.js"></script>
      <script>
        document.addEventListener("DOMContentLoaded", (event) => {
          loadProfiles();
        });
      </script>
  </body>

</html>